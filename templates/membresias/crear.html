{% extends 'base.html' %}

{% block title %}Crear Membresía - FITTECH{% endblock %}

{% block extra_css %}
<style>
.card-membresia {
    background: #fff;
    border-radius: 18px;
    box-shadow: 0 4px 18px -10px #6c63ff44;
    max-width: 520px;
    margin: 2rem auto 3rem;
    padding: 2.2rem 2.4rem;
}
.card-membresia h1 {
    font-size: 2rem;
    font-weight: 700;
    color: var(--dark-color);
    margin-bottom: 2rem;
}

.form-group {
    margin-bottom: 1.5rem;
}

.form-group label {
    font-weight: 600;
    color: var(--dark-color);
    display: block;
    margin-bottom: 0.4rem;
}

.form-group input,
.form-group textarea {
    width: 100%;
    padding: 1rem 1em;
    border-radius: 12px;
    border: 1.5px solid #d5d7ec;
    font-size: 1rem;
    font-weight: 600;
    color: var(--primary-color);
    transition: border-color 0.3s ease;
    background: #f5f7ff;
    resize: vertical;
}

.form-group input:focus,
.form-group textarea:focus {
    border-color: var(--primary-color);
    background: #fff;
    outline: none;
    box-shadow: 0 0 8px rgba(108, 99, 255, 0.4);
}

button.btn {
    width: auto;
    padding: 1rem 2.4rem;
    font-weight: 700;
    font-size: 1.1rem;
    border-radius: 12px;
    cursor: pointer;
    transition: background-color 0.3s ease;
    border: none;
}

.btn-primary {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
}

.btn-primary:hover {
    background: #5a57c9;
}

.btn-danger {
    background: #ef4444;
    color: white;
}

.btn-danger:hover {
    background: #dc2626;
}

.form-actions {
    display: flex;
    justify-content: flex-start;
    gap: 1rem;
    margin-top: 2rem;
}
</style>
{% endblock %}

{% block content %}
<div class="card-membresia">
    <h1>Crear Nueva Membresía</h1>
    <form method="POST" id="form-membresia" novalidate>
        {% csrf_token %}
        <div class="form-group">
            <label for="nombre">Nombre de la Membresía *</label>
            <input type="text" id="nombre" name="nombre" required maxlength="100" placeholder="Ej: Membresía Mensual">
        </div>
        <div class="form-group">
            <label for="duracion_dias">Duración (días) *</label>
            <input type="number" id="duracion_dias" name="duracion_dias" required min="1" max="365" placeholder="Ej: 30">
        </div>
        <div class="form-group">
            <label for="precio">Precio (COP) *</label>
            <input type="number" id="precio" name="precio" required min="0" step="1000" placeholder="Ej: 70000">
        </div>
        <div class="form-group">
            <label for="descripcion">Descripción</label>
            <textarea id="descripcion" name="descripcion" rows="4" placeholder="Descripción de la membresía (opcional)"></textarea>
        </div>

        <div class="form-actions">
            <button type="submit" class="btn btn-primary">Guardar Membresía</button>
            <a href="{% url 'membresias_listar' %}" class="btn btn-danger">Cancelar</a>
        </div>
    </form>
</div>
{% endblock %}

{% block extra_js %}
<script>
(function(){
    const form = document.getElementById('form-membresia');

    form.addEventListener('submit', function(e) {
        const nombre = form.nombre.value.trim();
        const duracion = Number(form.duracion_dias.value);
        const precio = Number(form.precio.value);

        if(!nombre) {
            alert('El nombre de la membresía es obligatorio');
            form.nombre.focus();
            e.preventDefault();
            return;
        }
        if(isNaN(duracion) || duracion < 1) {
            alert('La duración debe ser un número mayor o igual a 1');
            form.duracion_dias.focus();
            e.preventDefault();
            return;
        }
        if(isNaN(precio) || precio < 0) {
            alert('El precio debe ser un número mayor o igual a 0');
            form.precio.focus();
            e.preventDefault();
            return;
        }
    });
})();
</script>
{% endblock %}
